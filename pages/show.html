<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/iconfont.css">
	<link rel="stylesheet" href="../css/show.css">
	<script>
		(function(){document.documentElement.style.fontSize = document.documentElement.clientWidth / 10.8 + "px";})()
    </script>
	<title>首页</title>
</head>
<body>
	<div class="wrap">
		<div class="top clearfix">
			<a href="search.html">
				<img src="../images/fangda.png" alt="">
			</a>
		</div>
		<div class="carousel1">
			<div class="box1">
				<a href="#"><img src="../images/u68.jpg" alt=""></a>
				<a href="#"><img src="../images/u62.jpg" alt=""></a>
				<a href="#"><img src="../images/u65.jpg" alt=""></a>
				<a href="#"><img src="../images/u68.jpg" alt=""></a>
				<a href="#"><img src="../images/u62.jpg" alt=""></a>
			</div>
			<ul class="list clearfix">
				<li class="red"></li>
				<li></li>
				<li></li>
			</ul>
		</div>
		<div class="carousel2 clearfix">
			<a href="#"><img src="../images/zhuangzhi.jpg" alt=""></a>
			<a href="#"><img src="../images/huihua.jpg" alt=""></a>
			<a href="#"><img src="../images/shuimo.jpg" alt=""></a>
			<a href="#"><img src="../images/sheji.jpg" alt=""></a>
			<a href="#"><img src="../images/sheying.jpg" alt=""></a>
			<a href="#"><img src="../images/diaosu.jpg" alt=""></a>
			<a href="#"><img src="../images/zhuangzhi.jpg" alt=""></a>
			<a href="#"><img src="../images/huihua.jpg" alt=""></a>
		</div>
		<div class="show clearfix">
			<div class="show1">
				<div class="showtop clearfix">
					<a class="now" href="#">正在展出</a>
					<a class="fur" href="#">即将展出</a>
				</div>
				<div class="showbot">
					<div class="tabone">
						<div class="fun">
							<a href="xiaoquan.html">
								<img src="../images/now1.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">159</span>
								<i class="iconfont icon-liulan"></i>
								<span>394</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/now2.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">19</span>
								<i class="iconfont icon-liulan"></i>
								<span>94</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/now3.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">59</span>
								<i class="iconfont icon-liulan"></i>
								<span>39</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>59</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/now4.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">19</span>
								<i class="iconfont icon-liulan"></i>
								<span>34</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/now5.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">15</span>
								<i class="iconfont icon-liulan"></i>
								<span>3</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="show2">
				<div class="showtop clearfix">
					<a class="now" href="#">正在展出</a>
					<a class="fur" href="#">即将展出</a>
				</div>
				<div class="showbot">
					<div class="tabone">
						<div class="fun">
							<a href="xiaoquan.html">
								<img src="../images/u68.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">159</span>
								<i class="iconfont icon-liulan"></i>
								<span>394</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/u112_02.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">19</span>
								<i class="iconfont icon-liulan"></i>
								<span>94</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/u113_02.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">59</span>
								<i class="iconfont icon-liulan"></i>
								<span>39</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>59</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/u114_02.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">19</span>
								<i class="iconfont icon-liulan"></i>
								<span>34</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
						<div class="fun">
							<a href="#">
								<img src="../images/u65.jpg" alt="">
							</a>
							<div class="logo">
								<i class="iconfont icon-fenxiang share"></i>
								<i class="iconfont icon-guanzhu love"></i>
								<span class="like">15</span>
								<i class="iconfont icon-liulan"></i>
								<span>3</span>
								<i class="iconfont icon-momentmessage"></i>
								<span>9</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer class="clearfix">
			<a href="show.html">
				<i class="iconfont icon-xuanzhong"></i>
				<span class="color">展讯</span>
			</a>
			<a href="recommend.html">
				<i class="iconfont icon-tuijian"></i>
				<span>推荐</span>
			</a>
			<a href="issue.html">
				<i class="iconfont icon-fabu"></i>
				<span>发布</span>
			</a>
			<a href="person.html">
				<i class="iconfont icon-geren"></i>
				<span>个人</span>
			</a>
		</footer>
	</div>
	<div class="tipbox">
		<div class="tip">
			<img src="../images/now1.jpg">
			<p>您关注的展览<br>距离结束还有<span>10</span>天!</p>
		</div>
	</div>
	<script src="../js/jquery-3.1.1.js"></script>
	<script src="../js/hammer.min.js"></script>
	<script>
	//提示以及关闭
	setTimeout(function(){
		$(".tipbox").fadeOut("fast")
	},3000)
	var tip=document.getElementsByClassName("tipbox")[0]
	var close=new Hammer(tip)
	close.on("tap",function(){
		$(".tipbox").fadeOut("fast")
	})
		//选项卡的定位
		window.onload=function(){
			var h1 =$("footer").height()
			$(".showbot").css("margin-bottom",h1)
			var h3=$(".showtop").height()
			$(".tabone").css("margin-top",h3)
			//轮播图
			var box1=document.getElementsByClassName("box1")[0]
			var box2=document.getElementsByClassName("carousel2")[0]
			var swipe =new Hammer(box1)
			var tArr1=time(1) //传num=1，第一个轮播图中
			var tArr2=time(2) //传num=2，第一个轮播图中
			var t=setInterval(tArr1[0]($(".box1"),4,10.8),2000)
			//判断是否触摸手机屏
			box1.addEventListener("touchstart",function(){
				clearInterval(t)})
			box1.addEventListener("touchend",function(){
				clearInterval(t)
				 t=setInterval(tArr1[0]($(".box1"),4,10.8),2000)})

			//第一个轮播
			swipe.on("swipeleft",tArr1[0]($(".box1"),4,10.8))
			swipe.on("swiperight",tArr1[1]($(".box1"),3,10.8))
			//第二个轮播
			var swipetwo =new Hammer(box2)
			var wid2=5.44/2;
			swipetwo.on("swipeleft",tArr2[0]($(".carousel2"),13,wid2))
			swipetwo.on("swiperight",tArr2[1]($(".carousel2"),12,wid2))
			//滑动的函数
			function time(num){ //封装在一起为了让num可以有关联，左右滑都调用
				var num=num;
				function time1(obj,a,ml){ //右滑
					return function(){
						num++;
						obj.stop().animate({"margin-left": -num*ml+"rem"},200)
						if (num==a){
			            	obj.animate({"margin-left":-ml+"rem"},0)
			           		num=1;
			           	}
			           	$(".list li").eq(num-1).addClass("red").siblings().removeClass("red")
		           	}
				}
				function time2(obj,b,ml){ //左滑
					return function(){
						num--;
						obj.stop().animate({"margin-left": -num*ml+"rem"},200)
						if (num==0){
			            	obj.animate({"marginLeft":-b*ml+"rem"},0)
			           		num=b;
			           	}
			           	$(".list li").eq(num-1).addClass("red").siblings().removeClass("red")
		           	}
				}
				return [time1,time2]
			}
			//手指向上滑事件
				//正在展出
			var tab1=document.getElementsByClassName("tabone")[0]
			var tab1a=tab1.getElementsByTagName("a")[0]
			var h2=tab1a.clientHeight;
			var swipethree = new Hammer(tab1)
			swipethree.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });
			var sArr1=slide(-1)
			swipethree.on("swipeup",sArr1[0]($(".show1 .tabone")))
			swipethree.on("swipedown",sArr1[1]($(".show1 .tabone")))
			//即将展出
			var tab2=document.getElementsByClassName("tabone")[1]
			var swipefour = new Hammer(tab2)
			swipefour.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });
			var sArr2=slide(-1)
			swipefour.on("swipeup",sArr2[0]($(".show2 .tabone")))
			swipefour.on("swipedown",sArr2[1]($(".show2 .tabone")))
			//上下滑动的函数
			function slide(j){
				var j=j;
				function up(obj){
					return function(){
						j++;
						$(".carousel1").stop().slideUp("slow")
						if(j<=4){
						obj.stop().animate({"margin-top":-j*h2+h3},200)}
						if(j>4){
							j=4;
						}
					}
				}
				function down(obj){
					return function(){
						j--;
						if(j>=0){
							obj.stop().animate({"margin-top":-j*h2+h3},200)}
						if(j<0){
							j=-1;
							$(".carousel1").stop().slideDown("slow")}
						}
					}
				return [up,down]
			}
			//选项卡
				var showtop=document.getElementsByClassName("showtop")
				var aArr1=showtop[0].getElementsByTagName("a")
				var aArr2=showtop[1].getElementsByTagName("a")
				var change1=new Hammer(aArr1[1])
				var change2=new Hammer(aArr2[0])
				change1.on("tap",function(){ //左滑出show2
					$(".show").stop().animate({"margin-left":"-100"+"%"},300)
					$(".fur").addClass("b")
					$(".now").addClass("h")
				})
				change2.on("tap",function(){ //右滑出show1
					$(".show").stop().animate({"margin-left":0},300)
					$(".fur").removeClass("b")
					$(".now").removeClass("h")
				})
			////点爱心变色+变数
				var i=0;
				var love=document.getElementsByClassName("icon-guanzhu")
				var like=document.getElementsByClassName("like")
				for(var j=0;j<love.length;j++){
					(function(k){
						var guanzhu=new Hammer(love[k])
						guanzhu.on("tap",function(){
							var num=$(".fun").eq(k).find(".like").text()
							i++;
							if(i%2!=0){
								$(".fun").eq(k).find(".icon-guanzhu").removeClass("love")
								num--;
							}else{
								$(".fun").eq(k).find(".icon-guanzhu").addClass("love")
								num++;
							}
							$(".fun").eq(k).find(".like").text(num)
						})
					})(j)
				}

			}
	</script>
</body>
</html>
